const PDFDocument = require('pdfkit');
const fs = require('fs');
const path = require('path');

// Create PDF document
const doc = new PDFDocument({
  size: 'A4',
  margins: { top: 50, bottom: 50, left: 50, right: 50 }
});

// Pipe to file
const outputPath = path.join(__dirname, 'Authenticator-App-Presentation.pdf');
doc.pipe(fs.createWriteStream(outputPath));

// Helper functions
function addTitle(text, color = '#4dabf7') {
  doc.fontSize(24)
     .fillColor(color)
     .font('Helvetica-Bold')
     .text(text, { align: 'center' })
     .moveDown(0.5);
}

function addSectionTitle(icon, title, color = '#1a1a2e') {
  doc.fontSize(18)
     .fillColor(color)
     .font('Helvetica-Bold')
     .text(`${icon} ${title}`)
     .moveDown(0.3);
}

function addText(text, fontSize = 12, color = '#333') {
  doc.fontSize(fontSize)
     .fillColor(color)
     .font('Helvetica')
     .text(text, { align: 'left', lineGap: 5 })
     .moveDown(0.5);
}

function addBullet(icon, title, description) {
  const x = doc.x;
  doc.fontSize(16).text(icon, x, doc.y);
  doc.fontSize(14).fillColor('#1a1a2e').font('Helvetica-Bold').text(title, x + 30, doc.y - 16);
  doc.fontSize(11).fillColor('#666').font('Helvetica').text(description, x + 30, doc.y, { width: 450 });
  doc.moveDown(0.8);
}

function addPageBreak() {
  doc.addPage();
}

// Start creating the PDF
addTitle('Authenticator App', '#4dabf7');
addTitle('Complete Guide & Presentation', '#1a1a2e');
doc.moveDown(2);

addText('A comprehensive two-factor authentication solution with multiple security options and push notification support.', 14);
doc.moveDown(1);

// Welcome Section
addSectionTitle('ğŸ“±', 'Welcome to Your Authenticator');
addText('Your all-in-one solution for secure two-factor authentication. Protect your online accounts with time-based one-time passwords (TOTP) and enjoy peace of mind knowing your digital identity is secure.');
doc.moveDown(1);

// What is 2FA
addSectionTitle('ğŸ”', 'What is Two-Factor Authentication?');
addText('Two-factor authentication (2FA) adds an extra layer of security to your online accounts. Instead of just using a password, 2FA requires a second piece of information - a code generated by this app - making it much harder for unauthorized users to access your accounts.');
doc.moveDown(1);

// Why use 2FA
addSectionTitle('ğŸ’¡', 'Why Use Two-Factor Authentication?');
addBullet('ğŸ”’', 'Enhanced Security', 'Even if someone gets your password, they can\'t access your account without the second factor');
addBullet('âš¡', 'Quick & Easy', 'Generate secure codes instantly without waiting for SMS messages');
addBullet('ğŸ“±', 'Works Offline', 'No internet connection needed to generate authentication codes');
addBullet('ğŸŒ', 'Universal', 'Works with thousands of services including Google, Facebook, GitHub, and more');

addPageBreak();

// How It Works
addSectionTitle('âš™ï¸', 'How It Works');
addText('1. Scan QR Code - When setting up 2FA on a service, scan the provided QR code with the app', 12);
addText('2. Account Added - The service is now linked to your authenticator app', 12);
addText('3. Generate Codes - The app generates a new 6-digit code every 30 seconds', 12);
addText('4. Enter Code - When logging in, enter the current code from the app to verify your identity', 12);
doc.moveDown(1);

// App Lock Options
addSectionTitle('ğŸ”', 'Protect Your App with Multiple Lock Options');
addText('Secure your authenticator app with one of several convenient lock methods. Choose the option that works best for you:');
doc.moveDown(0.5);

addBullet('ğŸ”¢', 'PIN Code Lock', 'Set a 4-6 digit PIN code for quick and secure access. Perfect for fast unlocking while maintaining strong security.');
addBullet('ğŸ”²', 'Pattern Lock', 'Draw a custom pattern on a 3x3 grid. Intuitive and secure - unlock with a simple gesture.');
addBullet('ğŸ‘†', 'Fingerprint Authentication', 'Use your device\'s fingerprint sensor for instant, secure access. The fastest way to unlock!');
addBullet('ğŸ‘¤', 'Face Recognition', 'Unlock with just a glance using your device\'s facial recognition technology. Convenient and secure.');
addBullet('ğŸ”‘', 'Passkey Support', 'Use your device\'s built-in passkey functionality for passwordless authentication. The future of secure login.');

addPageBreak();

// Key Features
addSectionTitle('ğŸŒŸ', 'Key Features');
addBullet('ğŸ“·', 'QR Code Scanning', 'Quickly add accounts by scanning QR codes');
addBullet('âœï¸', 'Manual Entry', 'Add accounts manually if needed');
addBullet('ğŸ””', 'Push Notifications', 'Approve logins with one tap');
addBullet('ğŸ”', 'App Lock', 'Secure with PIN, pattern, or biometrics');
addBullet('â±ï¸', 'Auto-Lock', 'Lock automatically when inactive');
addBullet('ğŸ“‹', 'Code Copy', 'One-tap copy to clipboard');
doc.moveDown(1);

// Push Notifications
addSectionTitle('ğŸ“²', 'Push Notification Approvals');
addText('For supported services, you can approve login attempts directly from push notifications without opening the app or typing codes. Simply tap "Approve" when you receive a notification for a login attempt.');
doc.moveDown(0.5);
addText('âœ“ Instant approvals', 12);
addText('âœ“ Secure verification', 12);
addText('âœ“ See login details', 12);
doc.moveDown(1);

addPageBreak();

// Security Best Practices
addSectionTitle('ğŸ›¡ï¸', 'Security Best Practices');
addBullet('ğŸ”’', 'Enable App Lock', 'Always protect your authenticator with PIN, pattern, or biometric authentication');
addBullet('ğŸ”„', 'Regular Backups', 'Keep your accounts safe by backing up your secret keys securely');
addBullet('ğŸ‘ï¸', 'Review Regularly', 'Periodically review your accounts and remove any you no longer use');
addBullet('âš ï¸', 'Stay Alert', 'Be cautious of phishing attempts - never share your codes with anyone');
addBullet('ğŸ“±', 'Device Security', 'Keep your device updated and use a secure lock screen');
doc.moveDown(1);

// Getting Started
addSectionTitle('ğŸš€', 'Getting Started');
addText('1. Set Up App Lock - Choose your preferred security method (PIN, pattern, or biometric)', 12);
addText('2. Add Your First Account - Tap "Scan QR" and scan the QR code from the service you want to protect', 12);
addText('3. Verify Code - Enter the generated code on the service to complete setup', 12);
addText('4. You\'re Protected - Your account is now secured with two-factor authentication', 12);
doc.moveDown(2);

// Why Choose This Authenticator
addSectionTitle('ğŸ¯', 'Why Choose This Authenticator?');
addBullet('âœ¨', 'User-Friendly Interface', 'Clean, intuitive design that makes security simple');
addBullet('ğŸ”', 'Multiple Security Options', 'Choose from PIN, pattern, fingerprint, face recognition, or passkey');
addBullet('ğŸ“²', 'Push Notifications', 'One-tap login approvals for supported services');
addBullet('âš¡', 'Fast & Reliable', 'Instant code generation with no delays');
addBullet('ğŸ›¡ï¸', 'Privacy Focused', 'Your data stays on your device - no cloud storage required');
addBullet('ğŸ†“', 'Completely Free', 'All features available at no cost');

addPageBreak();

// Support Section
addSectionTitle('ğŸ’¬', 'Need Help?');
addText('If you have questions or need assistance:');
doc.moveDown(0.5);
addText('â€¢ Check the How-To guide in the app', 12);
addText('â€¢ Review security settings in the Settings tab', 12);
addText('â€¢ Ensure your device has the latest updates', 12);
addText('â€¢ For biometric issues, check your device settings', 12);
doc.moveDown(2);

// Footer
doc.fontSize(10)
   .fillColor('#999')
   .text('Â© 2025 Authenticator App - Your Security, Our Priority', { align: 'center' });

// Finalize PDF
doc.end();

console.log(`PDF generated successfully: ${outputPath}`);
